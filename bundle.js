(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{te:()=>s,lJ:()=>l});class t{constructor(e,t,n,a,d){this.title=e.toUpperCase().trim(),this.author=t.trim(),this.pages=n,this.language=a,this.read=d}}class n extends t{constructor(e,t,n,a,d,o){super(e,t,n,a,d),this.index=o,this.createCard()}createCard(){const e=document.getElementById("book-cards"),t=document.createElement("div");t.classList.add("book-card");const n=document.createElement("h2");n.textContent=this.title,t.appendChild(n);const a=document.createElement("h3");a.textContent=`By: ${this.author}`,t.appendChild(a);const d=document.createElement("p");d.textContent=`${this.pages} pages`,t.appendChild(d);const o=document.createElement("p");o.textContent=`Language: ${this.language}`,t.appendChild(o);const r=document.createElement("p");r.textContent=this.read?"Read":"Unread",t.appendChild(r);const c=this.AddReadStatusBtn(r);t.appendChild(c),t.setAttribute("data-index",this.index);const s=this.toggleRemove(t);t.appendChild(s),e.appendChild(t)}toggleReadStatus(){this.read=!this.read}AddReadStatusBtn(e){const t=document.createElement("button");return t.classList.add("book-read-btn"),t.textContent=this.read?"Mark as unread":"Mark as read",t.addEventListener("click",(()=>{this.toggleReadStatus(),t.textContent=this.read?"Mark as unread":"Mark as read",e.textContent=this.read?"Read":"Unread",l()})),t}toggleRemove(e){const t=document.createElement("button");return t.classList.add("book-remove-btn"),t.textContent="Remove",t.addEventListener("click",(()=>{e.remove();const t=parseInt(e.getAttribute("data-index"));s.splice(t,1),document.querySelector("#book-cards").querySelectorAll(".book-card").forEach(((e,t)=>{e.setAttribute("data-index",t)})),l()})),t}}function a(e){e.preventDefault();const t=document.getElementById("search").value;""!==t.trim()&&(c(s.filter((e=>e.title.toUpperCase()===t.toUpperCase()))),document.getElementById("search").value="")}function d(){c(s.filter((e=>e.read)))}function o(){c(s.filter((e=>!e.read)))}function r(){c(s)}function c(e){document.getElementById("book-cards").innerHTML="",e.forEach((e=>{e.createCard()}))}let s=[];function l(){const e=s.length,t=s.filter((e=>e.read)).length,n=s.filter((e=>!e.read)).length;document.querySelector("#total-books").textContent=e,document.querySelector("#total-read-books").textContent=t,document.querySelector("#total-unread-books").textContent=n}document.getElementById("submit-book-form").addEventListener("submit",(function(e){(function(e){e.preventDefault();const{title:t,author:a,pages:d,language:o,read:r}={title:document.getElementById("title").value.trim(),author:document.getElementById("author").value.trim(),pages:document.getElementById("pages").value.trim(),language:document.getElementById("language").value.trim(),read:document.getElementById("read").checked},c=new n(t,a,d,o,r,s.length);s.push(c)})(e),document.getElementById("submit-search").addEventListener("submit",a),document.querySelector(".show-read-btn").addEventListener("click",d),document.querySelector(".show-unread-btn").addEventListener("click",o),document.querySelector(".show-all-btn").addEventListener("click",r),l(),e.target.reset()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlLFVBQVU0QixNQUFNbkMsT0FJaENMLE1BSFRXLFNBQVNDLGVBQWUsU0FBUzRCLE1BQU1uQyxPQUd2QkosU0FGYlUsU0FBU0MsZUFBZSxZQUFZNEIsTUFBTW5DLE9BRW5CSCxLQUQzQlMsU0FBU0MsZUFBZSxRQUFRMEMsU0FTdkNDLEVBQVcsSUFBSWpELEVBQUtSLEVBQU9DLEVBQVFDLEVBQU9DLEVBQVVDLEVBQU02QixFQUFVb0IsUUFFMUVwQixFQUFVeUIsS0FBS0QsRUFFakIsRUFxQkVFLENBQWlCbkIsR0QxQ08zQixTQUFTQyxlQUFlLGlCQUNoQ2EsaUJBQWlCLFNBQVVZLEdBR1YxQixTQUFTc0IsY0FBYyxrQkFDL0JSLGlCQUFpQixRQUFTbUIsR0FHdEJqQyxTQUFTc0IsY0FBYyxvQkFDL0JSLGlCQUFpQixRQUFTb0IsR0FHckJsQyxTQUFTc0IsY0FBYyxpQkFDL0JSLGlCQUFpQixRQUFTcUIsR0NrQzVDcEIsSUFFQVksRUFBTW9CLE9BQU9DLE9BQ2YsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JyYWlubmVzdC1saWJyYXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JyYWlubmVzdC1saWJyYXJ5L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9icmFpbm5lc3QtbGlicmFyeS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JyYWlubmVzdC1saWJyYXJ5Ly4vc3JjL2Jvb2suanMiLCJ3ZWJwYWNrOi8vYnJhaW5uZXN0LWxpYnJhcnkvLi9zcmMvY2FyZC5qcyIsIndlYnBhY2s6Ly9icmFpbm5lc3QtbGlicmFyeS8uL3NyYy9ldmVudExpc3RlbmVyLmpzIiwid2VicGFjazovL2JyYWlubmVzdC1saWJyYXJ5Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiXG5jbGFzcyBCb29rIHtcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBhdXRob3IsIHBhZ2VzLCBsYW5ndWFnZSwgcmVhZCkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGUudG9VcHBlckNhc2UoKS50cmltKCk7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gYXV0aG9yLnRyaW0oKTtcbiAgICAgICAgdGhpcy5wYWdlcyA9IHBhZ2VzO1xuICAgICAgICB0aGlzLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMucmVhZCA9IHJlYWQ7XG4gICAgfVxuICAgIFxufVxuXG5cbmV4cG9ydCB7Qm9va307IiwiaW1wb3J0IHsgQm9vayB9IGZyb20gXCIuL2Jvb2tcIjtcbmltcG9ydCB7dXBkYXRlQ291bnRlcnMsYm9va0NhcmRzfSBmcm9tIFwiLi9pbmRleFwiXG5cbmNsYXNzIENhcmQgZXh0ZW5kcyBCb29rIHtcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgYXV0aG9yLCBwYWdlcywgbGFuZ3VhZ2UsIHJlYWQsIGluZGV4KXtcbiAgICAgc3VwZXIoIHRpdGxlLCBhdXRob3IsIHBhZ2VzLCBsYW5ndWFnZSwgcmVhZClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgLy9SZW5kZXIgdGhlIGJvb2sgY2FyZHMgb24gdGhlIExpYnJhcnlcbiAgICAgICAgdGhpcy5jcmVhdGVDYXJkKClcbiAgICB9XG5cblxuXG4gY3JlYXRlQ2FyZCgpIHtcbiAgY29uc3QgbGlicmFyeUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9vay1jYXJkc1wiKTtcblxuICAgIGNvbnN0IGJvb2tDYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBib29rQ2FyZC5jbGFzc0xpc3QuYWRkKFwiYm9vay1jYXJkXCIpO1xuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xuICAgIGJvb2tDYXJkLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgIGNvbnN0IGF1dGhvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICBhdXRob3IudGV4dENvbnRlbnQgPSBgQnk6ICR7dGhpcy5hdXRob3J9YDtcbiAgICBib29rQ2FyZC5hcHBlbmRDaGlsZChhdXRob3IpO1xuXG4gICAgY29uc3QgcGFnZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwYWdlcy50ZXh0Q29udGVudCA9IGAke3RoaXMucGFnZXN9IHBhZ2VzYDtcbiAgICBib29rQ2FyZC5hcHBlbmRDaGlsZChwYWdlcyk7XG5cbiAgICBjb25zdCBsYW5ndWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGxhbmd1YWdlLnRleHRDb250ZW50ID0gYExhbmd1YWdlOiAke3RoaXMubGFuZ3VhZ2V9YDtcbiAgICBib29rQ2FyZC5hcHBlbmRDaGlsZChsYW5ndWFnZSk7XG5cbiAgICBjb25zdCByZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgcmVhZC50ZXh0Q29udGVudCA9IHRoaXMucmVhZCA/IFwiUmVhZFwiIDogXCJVbnJlYWRcIjtcbiAgICBib29rQ2FyZC5hcHBlbmRDaGlsZChyZWFkKTtcblxuICAgIC8vUmVhZHN0YXR1cyBidXR0b24gY2FyZFxuICAgIGNvbnN0IHJlYWRCdXR0b24gPSB0aGlzLkFkZFJlYWRTdGF0dXNCdG4ocmVhZCk7XG4gICAgYm9va0NhcmQuYXBwZW5kQ2hpbGQocmVhZEJ1dHRvbik7XG5cbiAgICAvL3NldCBpbmRleCB0byBjYXJkXG4gICAgYm9va0NhcmQuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCB0aGlzLmluZGV4KTtcbiBcblxuICAgIC8vcmVtb3ZlIGJ1dHRvbiBjYXJkXG4gICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gdGhpcy50b2dnbGVSZW1vdmUoYm9va0NhcmQpO1xuICAgIGJvb2tDYXJkLmFwcGVuZENoaWxkKHJlbW92ZUJ1dHRvbik7XG5cbiAgXG4gICAgLy9hcHBlbmQgZXZlcnl0aGlnIHRvIGxpYnJhcnlDb250YWluZXJcbiAgICBsaWJyYXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKGJvb2tDYXJkKTtcblxuIFxuICAgIH1cblxuICAgXG4gIFxuXG5cbiAgICB0b2dnbGVSZWFkU3RhdHVzKCkge1xuICAgICAgICB0aGlzLnJlYWQgPSAhdGhpcy5yZWFkO1xuICAgIH1cblxuICAgIEFkZFJlYWRTdGF0dXNCdG4ocmVhZCkge1xuICAgICAgICBjb25zdCByZWFkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgcmVhZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYm9vay1yZWFkLWJ0blwiKTtcbiAgICAgICAgcmVhZEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMucmVhZCA/IFwiTWFyayBhcyB1bnJlYWRcIiA6IFwiTWFyayBhcyByZWFkXCI7XG5cbiAgICAgICAgcmVhZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVSZWFkU3RhdHVzKCk7XG4gICAgICAgICAgICByZWFkQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5yZWFkID8gXCJNYXJrIGFzIHVucmVhZFwiIDogXCJNYXJrIGFzIHJlYWRcIjtcbiAgICAgICAgICAgIHJlYWQudGV4dENvbnRlbnQgPSB0aGlzLnJlYWQgPyBcIlJlYWRcIiA6IFwiVW5yZWFkXCI7XG4gICAgICAgICAgICB1cGRhdGVDb3VudGVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVhZEJ1dHRvbjtcbiAgICB9XG5cbiAgICB0b2dnbGVSZW1vdmUoYm9va0NhcmQpIHtcbiAgICAgICBcbiAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgcmVtb3ZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJib29rLXJlbW92ZS1idG5cIik7XG4gICAgICAgIHJlbW92ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUmVtb3ZlXCI7XG5cbiAgICAgICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBib29rIGNhcmQgZnJvbSB0aGUgRE9NXG4gICAgICAgICAgICBib29rQ2FyZC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgY29uc3QgY2FyZEluZGV4ID0gcGFyc2VJbnQoYm9va0NhcmQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgYm9vayBhdCB0aGUgc3BlY2lmaWVkIGNhcmQgaW5kZXggZnJvbSB0aGUgbXlMaWJyYXJ5IGFycmF5XG4gICAgICAgICAgICBib29rQ2FyZHMuc3BsaWNlKGNhcmRJbmRleCwxKTtcbiAgICAgXG4gICAgICAgICAgICAvLyBSZS1pbmRleCB0aGUgcmVtYWluaW5nIGJvb2sgY2FyZHNcbiAgICAgICAgICAgIC8vZmluZHMgYWxsIGNoaWxkIGVsZW1lbnRzIG9mIFwiYm9vay1jYXJkc1wiIHdpdGggdGhlIGNsYXNzIFwiYm9vay1jYXJkXCIgdXNpbmcgcXVlcnlTZWxlY3RvckFsbCgpXG4gICAgICAgICAgICBjb25zdCBsaWJyYXJ5U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm9vay1jYXJkc1wiKTtcbiAgICAgICAgICAgIGxpYnJhcnlTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYm9vay1jYXJkXCIpLmZvckVhY2goKGNhcmQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgIC8vc2V0cyBpdHMgXCJkYXRhLWluZGV4XCIgYXR0cmlidXRlIHRvIGl0cyBuZXcgaW5kZXggaW4gdGhlIGJvb2tDYXJkcyBhcnJheS5cbiAgICAgICAgICAgICAgICAgY2FyZC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIGluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNvdW50ZXJzXG4gICAgICAgICAgICB1cGRhdGVDb3VudGVycygpO1xuICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlbW92ZUJ1dHRvbjtcbiAgICB9XG5cblxufVxuXG5leHBvcnQge0NhcmR9IiwiXG5pbXBvcnQgeyBib29rQ2FyZHMgfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5mdW5jdGlvbiBldmVudExpc3RlbmVyKCkge1xuXG4gICAgICAvLyBldmVudCBsaXN0ZW5lciBoYW5kbGluZyBzZWFyY2ggZm9ybSBzdWJtaXQgXG4gICAgICAgY29uc3Qgc2VhcmNoRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXNlYXJjaFwiKTtcbiAgICAgICBzZWFyY2hGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZmlsdGVyU2VhcmNoKTtcblxuICAgICAgIC8vc2hvdy1yZWFkLWJ0bmFcbiAgICAgICBjb25zdCBzZWxlY3RTaG93UmVhZEJvb2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaG93LXJlYWQtYnRuXCIpO1xuICAgICAgIHNlbGVjdFNob3dSZWFkQm9va3MuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNob3dSZWFkQnRuKTtcblxuICAgICAgIC8vc2hvdy11bnJlYWQtYnRuXG4gICAgICAgY29uc3Qgc2hvd1VucmVhZEJvb2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaG93LXVucmVhZC1idG5cIik7XG4gICAgICAgc2hvd1VucmVhZEJvb2tzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93VW5yZWFkQnRuKTtcblxuICAgICAgIC8vc2hvdy1hbGwtYnRuXG4gICAgICAgY29uc3Qgc2hvd0FsbEJvb2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaG93LWFsbC1idG5cIik7XG4gICAgICAgc2hvd0FsbEJvb2tzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93QWxsQnRuKTtcblxuICB9XG5cblxuICAgICAgIC8vZmlsdGVyIHNlYXJjaCBmdW5jXG4gIGZ1bmN0aW9uIGZpbHRlclNlYXJjaChldmVudCkge1xuICAgIFxuICAgIC8vd2hlbiBzdWJtaXQgdGhlIGZvcm0gaXQgcHJldmVudCByZWxvYWQgdGhlIHBhZ2UuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikudmFsdWU7XG5cbiAgICBpZiAodGl0bGUudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyZWRCeVRpdGxlID0gYm9va0NhcmRzLmZpbHRlcihcbiAgICAgIChib29rKSA9PiBib29rLnRpdGxlLnRvVXBwZXJDYXNlKCkgPT09IHRpdGxlLnRvVXBwZXJDYXNlKClcbiAgICApO1xuXG4gICBcbiAgICAvL3JlbmRlciBpbnN0YW5jZSBvZiB0aGUgQ2FyZCBiYXNlZCBvbiBmaWx0ZXJCeVRpdGxlIGluc3RhbmNlXG4gICAgcmVuZGVyQ2FyZChmaWx0ZXJlZEJ5VGl0bGUpXG5cbiAgICAvL3NldCB0byBlbXB0eSB0aGUgaW5wdXQgc2VhcmNoIGZpZWxkXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hcIikudmFsdWUgPSBcIlwiXG4gIH1cblxuXG5cblxuICAvL3Nob3ctcmVhZC1idG4gZnVuY1xuICBmdW5jdGlvbiBzaG93UmVhZEJ0bigpIHtcbiAgICBjb25zdCBmaWx0ZXJCeVJlYWRCb29rID0gYm9va0NhcmRzLmZpbHRlcigoYm9vaykgPT4gYm9vay5yZWFkKVxuICAgIHJlbmRlckNhcmQoZmlsdGVyQnlSZWFkQm9vaylcbiAgfVxuXG4gIC8vc2hvdy11bnJlYWQtYnRuIGZ1bmNcbiAgZnVuY3Rpb24gc2hvd1VucmVhZEJ0bigpIHtcbiAgICBjb25zdCBmaWx0ZXJCeVVuUmVhZEJvb2sgPSBib29rQ2FyZHMuZmlsdGVyKChib29rKSA9PiAhYm9vay5yZWFkKVxuICAgIHJlbmRlckNhcmQoZmlsdGVyQnlVblJlYWRCb29rKVxuICAgIFxuICB9XG5cbiAgLy9zaG93LWFsbC1idG4gZnVuY1xuICBmdW5jdGlvbiBzaG93QWxsQnRuKCkge1xuICAgIC8vc2hvdyBhbGwgaW5zdGFuY2Ugb2YgdGhlIENhcmRcbiAgICByZW5kZXJDYXJkKGJvb2tDYXJkcylcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZHMpe1xuICAgICAvL3RhcmdldCBib29rLWNhcmQgYW5kIHNldCB0byBlbXB0eSAgY2FyZCBkaXZcbiAgICAgY29uc3QgbGlicmFyeUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm9vay1jYXJkc1wiKVxuICAgICBsaWJyYXJ5Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBjYXJkcy5mb3JFYWNoKChib29rY2FyZCkgPT4ge1xuICAgICAgYm9va2NhcmQuY3JlYXRlQ2FyZCgpO1xuICAgIH0pXG4gIH1cblxuZXhwb3J0IHtldmVudExpc3RlbmVyfTtcbiIsImltcG9ydCB7IEJvb2sgfSBmcm9tIFwiLi9ib29rLmpzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vY2FyZC5qc1wiO1xuaW1wb3J0IHsgZXZlbnRMaXN0ZW5lcn0gZnJvbSBcIi4vZXZlbnRMaXN0ZW5lci5qc1wiO1xuLy9pbXBvcnQgXCIuL3N0eWxlcy5jc3NcIlxuXG5sZXQgYm9va0NhcmRzID0gW107XG5cblxuZnVuY3Rpb24gZ2V0VXNlcklucHV0KCl7XG4gIC8vIEdldCB1c2VyIGlucHV0IGZyb20gdGhlIGZvcm1cbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlLnRyaW0oKTtcbiAgY29uc3QgYXV0aG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhdXRob3JcIikudmFsdWUudHJpbSgpO1xuICBjb25zdCBwYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFnZXNcIikudmFsdWUudHJpbSgpO1xuICBjb25zdCBsYW5ndWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGFuZ3VhZ2VcIikudmFsdWUudHJpbSgpO1xuICBjb25zdCByZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWFkXCIpLmNoZWNrZWQ7XG4gIHJldHVybiB7dGl0bGUsIGF1dGhvciwgcGFnZXMsIGxhbmd1YWdlLCByZWFkfVxufVxuXG5mdW5jdGlvbiBhZGRCb29rVG9MaWJyYXJ5KGV2ZW50KXtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qge3RpdGxlLCBhdXRob3IsIHBhZ2VzLCBsYW5ndWFnZSwgcmVhZH0gPSBnZXRVc2VySW5wdXQoKTtcblxuICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgY2FyZCBvYmplY3Qgd2l0aCB0aGUgdXNlciBpbnB1dFxuICBjb25zdCBuZXdDYXJkICA9IG5ldyBDYXJkKHRpdGxlLCBhdXRob3IsIHBhZ2VzLCBsYW5ndWFnZSwgcmVhZCwgYm9va0NhcmRzLmxlbmd0aClcblxuICBib29rQ2FyZHMucHVzaChuZXdDYXJkKVxuXG59XG5cblxuZnVuY3Rpb24gdXBkYXRlQ291bnRlcnMoKXtcbiAgY29uc3QgdG90YWxCb29rcyA9IGJvb2tDYXJkcy5sZW5ndGg7XG4gIGNvbnN0IHRvdGFsUmVhZEJvb2tzID0gYm9va0NhcmRzLmZpbHRlcigoYm9vaykgPT4gYm9vay5yZWFkKS5sZW5ndGg7XG4gIGNvbnN0IHRvdGFsVW5yZWFkQm9va3MgPSBib29rQ2FyZHMuZmlsdGVyKChib29rKSA9PiAhYm9vay5yZWFkKS5sZW5ndGg7XG5cbiAgY29uc3QgdG90YWxCb29rc0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RvdGFsLWJvb2tzXCIpO1xuICB0b3RhbEJvb2tzQ291bnRlci50ZXh0Q29udGVudCA9IHRvdGFsQm9va3M7XG5cbiAgY29uc3QgdG90YWxSZWFkQm9va3NDb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b3RhbC1yZWFkLWJvb2tzXCIpO1xuICB0b3RhbFJlYWRCb29rc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0b3RhbFJlYWRCb29rcztcblxuICBjb25zdCB0b3RhbFVucmVhZEJvb2tzQ291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG90YWwtdW5yZWFkLWJvb2tzXCIpO1xuICB0b3RhbFVucmVhZEJvb2tzQ291bnRlci50ZXh0Q29udGVudCA9IHRvdGFsVW5yZWFkQm9va3M7XG59XG5cblxuZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChldmVudCkge1xuIFxuICBhZGRCb29rVG9MaWJyYXJ5KGV2ZW50KVxuICAvLyBDYWxsIHRoZSBkaXNwbGF5Qm9va3MgZnVuY3Rpb24gaW5pdGlhbGx5IHRvIGRpc3BsYXkgdGhlIGJvb2sgY2FyZHMgb24gdGhlIHBhZ2VcbiAgZXZlbnRMaXN0ZW5lcigpXG4gIFxuICAvL21hbmFnZSB0aGUgY291bnRlcnMgZm9yIHRvdGFsIGJvb2tzLCByZWFkIGFuZCB1bnJlYWQgYm9va3NcbiAgdXBkYXRlQ291bnRlcnMoKTtcbiAgLy8gQ2xlYXIgdGhlIGZvcm0gaW5wdXRzXG4gIGV2ZW50LnRhcmdldC5yZXNldCgpO1xufVxuXG4vLyBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIFwiQUREIE5FVyBCT09LXCIgZm9ybSB0byBoYW5kbGUgZm9ybSBzdWJtaXRcbmNvbnN0IGFkZE5ld0Jvb2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1ib29rLWZvcm1cIik7XG5hZGROZXdCb29rLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRm9ybVN1Ym1pdCk7XG5cbmV4cG9ydCB7IGJvb2tDYXJkcyx1cGRhdGVDb3VudGVycyxnZXRVc2VySW5wdXQgfTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkJvb2siLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiYXV0aG9yIiwicGFnZXMiLCJsYW5ndWFnZSIsInJlYWQiLCJ0aGlzIiwidG9VcHBlckNhc2UiLCJ0cmltIiwiQ2FyZCIsImluZGV4Iiwic3VwZXIiLCJjcmVhdGVDYXJkIiwibGlicmFyeUNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJib29rQ2FyZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwicmVhZEJ1dHRvbiIsIkFkZFJlYWRTdGF0dXNCdG4iLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVCdXR0b24iLCJ0b2dnbGVSZW1vdmUiLCJ0b2dnbGVSZWFkU3RhdHVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwZGF0ZUNvdW50ZXJzIiwicmVtb3ZlIiwiY2FyZEluZGV4IiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJib29rQ2FyZHMiLCJzcGxpY2UiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJjYXJkIiwiZmlsdGVyU2VhcmNoIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwicmVuZGVyQ2FyZCIsImZpbHRlciIsImJvb2siLCJzaG93UmVhZEJ0biIsInNob3dVbnJlYWRCdG4iLCJzaG93QWxsQnRuIiwiY2FyZHMiLCJpbm5lckhUTUwiLCJib29rY2FyZCIsInRvdGFsQm9va3MiLCJsZW5ndGgiLCJ0b3RhbFJlYWRCb29rcyIsInRvdGFsVW5yZWFkQm9va3MiLCJjaGVja2VkIiwibmV3Q2FyZCIsInB1c2giLCJhZGRCb29rVG9MaWJyYXJ5IiwidGFyZ2V0IiwicmVzZXQiXSwic291cmNlUm9vdCI6IiJ9